<div class="container">
  <div class="row">
    <div class="col-md-4">
      <span>
        <p class="h2">
          <small>
            Organization ID:
          </small>
          <br>
          {{organizationId}}
        </p>
        <p class="h2">
          <small>
            Contract ID:
          </small>
          <br>
          {{contractId}}
        </p>
      </span>

      <section class="application-nav sticky-top">
        <h3>Renew Application</h3>
        <mat-vertical-stepper (selectionChange)="gotoPage($event)" #stepper>
          <ng-template matStepperIcon="edit">
            <mat-icon>done</mat-icon>
          </ng-template>
          <ng-template matStepperIcon="number">
          </ng-template>
          <mat-step *ngFor="let item of upperItems" label="{{item}}"></mat-step>
          <mat-step *ngFor="let item of programs" label="Program: {{item}}"></mat-step>
          <mat-step *ngFor="let item of lowerItems" label="{{item}}"></mat-step>
        </mat-vertical-stepper>
      </section>
    </div>

    <div class="col-md-8">
      <!-- Section is not in programs list -->
      <div *ngIf="programs.indexOf(currentFormPage)===-1">
        <div class="page-header">
          <h1>{{currentFormPage}}</h1>
        </div>
        <div *ngIf="currentFormPage === upperItems[0]">
          TODO: must test app-contact-information
          <!-- <app-contact-information [(contactInformation)]='contactInformation' (valid)="contactIsValid($event)"></app-contact-information> -->
          <button class="btn btn-primary" (click)="contactInformationSave()">Save</button>
        </div>
        <div *ngIf="currentFormPage === upperItems[1]">
          TODO: must debug app-administrative-information
          <!-- <app-administrative-information [(administrativeInformation)]="administrativeInformation" (valid)="administrativeInformationIsValid($event)"></app-administrative-information> -->
          <button class="btn btn-primary" (click)="administrativeInformationSave()">Save</button>
        </div>
        <div *ngIf="currentFormPage === upperItems[2]">
          <app-cg-liability></app-cg-liability>
          <!-- Instead of passing values to the component this is a simpler approach for a one click form. It is different than the other forms. -->
          <div class="form-group">
            Please choose from ONE of the following options:
            <div class="form-check form-check-inline">
              <input #cglOption="ngModel" [(ngModel)]="cgLiability" class="form-check-input" type="radio" name="cglOption" id="cglOption1" value="Agency Carries own CGL coverage." required>
              <label class="form-check-label" for="cglOption1">
                <strong> Option A: </strong> Your agency carries its own Commercial General Liability (CGL) coverage (as describe above) that covers the programs and services you are applying to provide.
              </label>
            </div>
            <div class="form-check form-check-inline">
              <input #cglOption="ngModel" [(ngModel)]="cgLiability" class="form-check-input" type="radio" name="cglOption" id="cglOption2" value="Agency requesting Province's Master Insurance Program enrolment." required>
              <label class="form-check-label" for="cglOption2">
                <strong> Option B: </strong> Your agency is requesting enrolment in the Province's Master Insurance Program.
              </label>
            </div>
          </div>
          <button class="btn btn-primary" (click)="cgLiabilitySave()">Save</button>
        </div>
        <div *ngIf="currentFormPage === lowerItems[0]">
          Unimplemented
        </div>
        <div *ngIf="currentFormPage === lowerItems[1]">
          <app-program-authorizer (unlock)="unlock($event)"></app-program-authorizer>
          The user can sign and submit: {{canSubmit}}
        </div>
      </div>

      <div *ngFor="let item of programMeta">
        <div *ngIf="currentFormPage === item.programName">
          <div class="page-header">
            <h1>{{item.programName}}</h1>
          </div>
          <!-- This massive complex component handles itself instead of returning data -->
          <app-program-planner [programMeta]="item"></app-program-planner>
        </div>
      </div>
    </div>
  </div>
</div>